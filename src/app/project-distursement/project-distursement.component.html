<app-loader [loading]="loading"></app-loader>
<div class="col-lg-12 whole">

  <!-- ----------------BREADCRUM----------->
  <div class="col-lg-12 pl-0">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb mb-1 pl-0">

        <li class="breadcrumb-item home px-0"><a href="dashboard">Dashboard</a></li>
        <li class="breadcrumb-item px-0"><a href="project-disbursement">Project Disbursement</a></li>
      </ol>
    </nav>
  </div>
  <!-- ----------------BREADCRUM----------->

  <div class="col-lg-12 px-0 first-line ">
    <div class="col-lg-7 pl-0 mx-0 mt-2 list">
      <h5>Project Disbursement</h5>
    </div>
  </div>

  <div class="col-lg-12 flex padlr">
    <div class="col-lg-8 px-0 flex">
      <div class="col-lg-4 padlr col-12 alternative drop-d">
        <mat-form-field appearance="standard">
          <mat-label>Project Name</mat-label>
          <mat-select (selectionChange)="projectChange($event)">
            <mat-option *ngFor="let project of project_list" [value]="project.PROJECTID">{{project.PROJECT_NAME}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-lg-4 col-12 alternative drop-d">
        <mat-form-field appearance="standard">
          <mat-label>Building Name</mat-label>
          <mat-select (selectionChange)="buildingChange($event)">
            <mat-option *ngFor="let building of building_list" [value]="building.PROJ_BLDG_NO">{{building.BLDG_NAME}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <!-- <div [routerLink]="['/add-project']" class="col-4 pt-2 icon-add text-right">
            <img src="./assets/images/icons/add-project.png">
         </div> -->
    </div>
    <div class="col-lg-4 col-12 px-0 pt-3 search">
      <form class="form-inline  mx-0">
        <i class="fa fa-search pr-1" aria-hidden="true"></i>
        <input type="search" placeholder="Search" name="search"  [(ngModel)]="search_text" aria-label="Search">


      </form>
    </div>
  </div>

  <!-- -------------------------------HEAD TITLE ENDS HERE------------------------------------- -->

  <!-- <div class="col-lg-12 pl-0 search-result">
    <div class="col-lg-2 px-0 res">
      <p class="font-italic text-secondary mb-0 pt-1">15 Result Found in</p>
    </div>
    <div class="col-lg-10">
      <span class="badge badge-danger ml-1"><i class="fa fa-building pr-1" aria-hidden="true"></i>Raj Anderson<i
          class="fa fa-times pl-1" aria-hidden="true"></i></span>
      <span class="badge badge-danger ml-1"><i class="fa fa-building pr-1" aria-hidden="true"></i>Gusnam<i
          class="fa fa-times pl-1" aria-hidden="true"></i></span>
      <span class="badge badge-danger ml-1"><i class="fa fa-building pr-1" aria-hidden="true"></i>Raj Anderson yoyo<i
          class="fa fa-times pl-1" aria-hidden="true"></i></span>
      <span class="badge badge-danger ml-1"><i class="fa fa-building pr-1" aria-hidden="true"></i>Gusnam Shirgopal
        Venkatraman<i class="fa fa-times pl-1" aria-hidden="true"></i></span>
    </div>

  </div>
 -->





  <!-- ------------------------------MAIN CONTAIN------------------------------------ -->
 <div *ngFor="let disb of disbursement_list | filter:search_text">
   <div class="col-xl-12 col-12 pb-2 main-list mt-3 px-0" data-toggle="modal" data-target="#exampleModal" (click)="getDisbDetail(disb)" >

     <div class="col-xl-3 col-8 pr-0 mb-0 name">
       <p class="top mb-0"><b>{{ disb.CUSTOMER_NAME | titlecase }}</b>
       </p>
     </div>
     <div class="col-xl-6 col-8 pr-0 mb-0 address text-center">
       <p class="top mb-0"><b>{{ disb.FLAT_NO | titlecase }}/{{ disb.FLOOR_NO | titlecase }}</b>
       </p>
     </div>
     <!-- <div class="col-xl-5 col-10 pt-2 circle">
       <label class="text-secondary font-italic mb-0">Total Disbursement Mode</label>
       <span class="float-right dollar"><b>${{ disb.TOTAL_DISB_MADE }}</b></span>
       <div class="progress" style="height:5px;width: 100%;">
         <div class="progress-bar bar-1" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0"
           aria-valuemax="100"></div>
         <div class="progress-bar bar-2" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0"
           aria-valuemax="100"></div>
         <div class="progress-bar bar-3" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0"
           aria-valuemax="100"></div>
       </div>
     </div> -->
     <div class="col-xl-3 col-2 text-right i-con pt-2">
       <img class="w-01 ml-1" src="./assets/images/icons/view icon.png">
     </div>
   </div>
 </div>
</div>
<!--
<div class="col-lg-12 col-12 text-center pt-2">
  <span><img style="width: 20px;" src="./assets/images/loadmoreicon.png" alt=""></span> <button
    style="color: rgb(63,151,255);" class="btn fs-12 font-italic">Load More</button>
</div> -->
<!-- -----------------------MODAL---------------------- -->

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <!-- <img src="./assets/images/icons/building2.png" height="20px"> -->
        <h5 class="modal-title" id="exampleModalLabel">{{ CUSTOMER_NAME | titlecase}} ({{ FLAT_NO | titlecase}}/{{ FLOOR_NO | titlecase}})</h5>
        <button type="button" class="close pt-1" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true"><i class="fa fa-times" aria-hidden="true"></i></span>
        </button>
      </div>
      <div class="modal-body px-0" style="overflow-x: auto !important;">
        <div class="table-responsive">
        <table class="table" style="overflow-x: auto !important;">
          <thead class="thead-dark text-center">
            <tr>
              <th scope="col">DISBMT NO</th>
              <!-- <th scope="col">DISBMT DATE</th> -->
              <th scope="col" style="vertical-align: middle;">PAYEE NAME</th>
              <th scope="col">Mode of disbursement (EFT/Cheque)</th>
              <th scope="col">CHEQUE/UTR NO</th>
              <th scope="col">DISBMT AMT</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let detail of disb_detail">
              <td class="text-primary">{{ detail.DISB_NO }}</td>
              <!-- <td>15 Dec'18</td> -->
              <td class="text-left">{{ detail.PAYABLE_TO | titlecase}}</td>
              <td>{{detail.DISB_MODE}}</td>
              <td>{{ detail.CHEQUE_NO }}</td>
              <td class="text-left">&#x20b9;{{ detail.AMOUNT }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      </div>
      <div class="modal-footer">
        <div class="col-12">
          <div class="col-4 col-10 px-0 float-right footer">
            <div class="col-8 px-0">TOTAL DISBURSEMENT</div>
            <div class="col-4 px-0">&#x20b9;{{ total_disbusment }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
