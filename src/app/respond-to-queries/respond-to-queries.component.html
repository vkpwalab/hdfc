<!-- <p>respond-to-queries works!</p> -->
<app-loader [loading]="loading"></app-loader>
<div class="col-lg-12 whole">

    <div class="col-lg-12 pl-0">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-1 pl-0">
                <li class="breadcrumb-item home px-0"><a href="dashboard">Dashboard</a></li>
                <li class="breadcrumb-item px-0"><a href="respond-to-queries">Respond To Queries</a></li>
            </ol>
        </nav>
    </div>

    <div class="col-lg-12 col-12 px-0 first-line">
        <div class="col-lg-7 mx-0 mt-2 list pl-0">
            <h5>Respond To Queries</h5>
            <span class="badge badge-primary ml-2 mt-1">22</span>
        </div>
        <!-- <div class="col-lg-5 col-12 search-bar px-0 ">
        <div class="col-lg-12 col-12  Q-ser pr-0 pl-0">
            <div class="col-lg-8 col-10 px-0 py-0  search">
                <form class="form-inline mx-0 mt-2">
                    <i class="fa fa-search pr-1" aria-hidden="true"></i>
                    <input type="search" placeholder="Search" aria-label="Search">
                </form>
            </div>
            <div class="col-2  cell pl-0 pt-1">
                <div class="col-2"><img src="./assets/images/icons/filter.png" height="20px"></div>
            </div>
            <div class="col-lg-4 px-0 btn-1 pt-0">
                <div class="col-lg-10 pr-0 text-center ml-2">
                    <div class="text-center">
                        <button class="main_btn_log"><i class="fa fa-filter" aria-hidden="true"></i> Filter</button>
                    </div>
                </div>

            </div>
        </div>
    </div> -->
    </div>

    <div class="col-lg-12 mt-2 project alternative padlrnew">
        <div class="col-lg-3 col-12 px-0">
            <mat-form-field appearance="standard">
                <mat-label>Select Project</mat-label>
                <mat-select (selectionChange)="projectChange($event)">
                    <mat-option *ngFor="let project of project_list" [value]="project.PROJECTID">
                        {{project.PROJECT_NAME}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
    </div>

    <!-- -----------------------------------------------------------------MAIN -->

    <!-- <div class="col-lg-12 col-12 row px-0 m-0 shadow brnew mt-3">
        <div class="col-lg-3 col-12 py-3" *ngFor="let query of query_list">
            <div style="border: 1px solid lightgray;" class="card p-2 brnew">
                <p class="fs-12 mb-0"><span style="color: gray;">Raised by:</span><span
                        class="font-weight-bold pl-1">{{builder_names[query.CREATED_BY] | titlecase}}</span> </p>
                <div class="col-lg-4 col-4 px-0 mt-2">
                    <p style="background-color: rgb(246,179,21);"
                        class="fs-12 border-0 text-center wcolor mb-0 rounded">General
                    </p>
                </div>
                <p class="fs-10 pt-1">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quasi deserunt distinctio
                    consectetur est ullam, placeat explicabo magnam dolor nesciunt id quo odit laborum, vero quae culpa
                    asperiores ea laudantium beatae.</p>
                <span class="fs-12" style="color: gray;"> <img style="width: 18px;" class="pr-2"
                        src="./assets/images/clock_1.png" alt="">1 day
                    ago</span>
                <p class="fs-10 pt-2">You responded on 16 sep'19</p>
                <div class="col-lg-12 col-12 text-center pb-2" data-toggle="modal" data-target="#example">
                    <button type="button" class="btn btn1 active"
                        (click)="queryData(query.QUEST_ID,builder_names[query.CREATED_BY],query)">
                        <span><img style="width: 20px;" class="pr-1" src="./assets/images/icons/respondicon.png" alt="">
                            Respond</span></button>
                </div>
            </div>
        </div>
    </div> -->

    <!-- -----------------------------------STATIC START HERE--------------------------- -->

    <div class="col-lg-12 col-sm-12 px-0 shadow main-box" id="submit3" *ngIf="project_selected">

        <mat-tab-group mat-align-tabs="center" id="submit3">
            <div class="col-lg-12 col-12">
                <mat-tab label="Pending">
                    <div class="col-lg-12 col-12 row px-0 m-0  brnew mt-3">
                        <div class="col-lg-3 col-12 py-3" *ngFor="let query of query_list">
                            <div style="border: 1px solid lightgray;" class="card p-2 brnew">
                                <p class="fs-12 mb-0"><span style="color: gray;">Raised by:</span><span
                                        class="font-weight-bold pl-1">{{builder_names[query.CREATED_BY] | titlecase}}</span>
                                </p>
                                <div class="col-lg-4 col-4 px-0 mt-2">
                                    <p style="background-color: rgb(246,179,21);"
                                        class="fs-12 border-0 text-center wcolor mb-0 rounded">General
                                    </p>
                                </div>
                                <p class="fs-10 pt-1">{{query.QUERY}}</p>
                                <span class="fs-12" style="color: gray;"> <img style="width: 18px;" class="pr-2"
                                        src="./assets/images/clock_1.png" alt="">{{ timeSince(query.CREATED_ON) }}
                                    ago</span>
                                <!-- <p class="fs-10 pt-2">You responded on 16 sep'19</p> -->
                                <div class="col-lg-12 col-12 text-center pb-2 pt-2" data-toggle="modal"
                                    data-target="#example">
                                    <button type="button" class="btn btn1 active"
                                        (click)="queryData(query.QUEST_ID,builder_names[query.CREATED_BY],query,'response')">
                                        <span><img style="width: 20px;" class="pr-1"
                                                src="./assets/images/icons/respondicon.png" alt="">
                                            Respond</span></button>
                                </div>
                            </div>
                        </div>
                    </div>

                </mat-tab>

                <!-- ---------------------------------------------------------------------------- -->

                <mat-tab label="Respond">
                    <div class="col-lg-12">
                        <div class="col-lg-12 mt-3 px-0 main-list py-2 flex-list" *ngFor="let query of responded_query">
                            <div class="col-lg-3 col-12">
                                <p class="mb-0 p-top"><span class="text-secondary f-13">Raised by:</span><span
                                        class="font-weight-bold pl-1 f-13">{{builder_names[query.CREATED_BY] | titlecase}}</span> </p>
                            </div>
                            <div class="col-lg-2 col-6">
                                <p class=" m-top text-center wcolor w-yel mb-0">General
                                </p>
                            </div>
                            <div class="col-lg-4 col-12 pl-0 para-left">
                                <p class="mb-0 f-11 para-00">{{query.QUERY}}</p>
                            </div>
                            <div class="col-lg-1 text-center col-6 date">
                                <p class="mb-0 f-12 p-top">{{ query.CREATED_ON | date: 'dd/MM/yyyy' }}</p>
                            </div>
                            <div class="col-lg-2 col-5 btn-mob" >
                                <button type="button" class="btn btn1 active" data-toggle="modal"
                                data-target="#example" (click)="queryData(query.QUEST_ID,builder_names[query.CREATED_BY],query,'view')">View</button>
                            </div>
                        </div>
                    </div>
                </mat-tab>
            </div>
        </mat-tab-group>
    </div>

</div>










<!-- -------------------------------MODAL-BOX----------------------------- -->


<div class="modal fade" id="example" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content shadow bg-white brnew p-2">
            <div class="col-lg-12 col-12 mt-2 padr" id="forresopnd">
                <div class="col-lg-12 col-12">
                    <div class="w-20 close" data-dismiss="modal" aria-label="Close">
                        <button type="button" class="close pt-1" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true"><i class="fa fa-times" aria-hidden="true"></i></span>
                        </button>
                    </div>
                </div>
                <div class="p-2 mt-1">
                    <p class="fs-12 mb-0"><span style="color: gray;">Raised by:</span><span
                            class="font-weight-bold pl-1">{{ raised_by | titlecase}}</span> </p>
                    <div class="col-lg-2 col-3 px-0 mt-2">
                        <p style="background-color: rgb(246,179,21);"
                            class="fs-12 border-0 text-center wcolor mb-0 rounded">General
                        </p>
                    </div>
                    <div *ngFor="let query of query_data">
                        <p class="fs-10 font-weight-bold pt-3 mb-0" *ngIf="query.QUERY_TYPE != 'Builder'">
                            {{ query.QUERY }}</p>
                        <!-- <i style="color: gray;" class="fa fa-clock-o fs-12 pt-2" aria-hidden="true"><span class="pl-2">1
                                week
                                ago</span></i> -->
                        <!-- <p class="fs-10 pt-2 font-weight-bold mb-0">You responded on 16 sep'19</p> -->

                        <p class="fs-10 pt-3 mb-0" *ngIf="query.QUERY_TYPE == 'Builder'">{{ query.QUERY }}</p>

                        <p class="fs-10 pt-2 font-weight-bold mb-0">{{ query.CREATED_ON }}</p>

                    </div>

                    <div class="col-lg-12 col-12 px-0 mt-3 pb-2 upload" *ngIf="file_name">
                        <div class="col-lg-2 col-2 pt-2">
                            <img [src]="file_icon" alt="" width="35px">
                        </div>
                        <div class="col-lg-8 col-8 doc">
                            <p class="para-dou mb-0"><b>{{ file_name }}</b></p><label>Upload size -
                                <span>{{ file_size }}
                                    mb</span></label>
                        </div>
                        <div class="col-lg-2 col-2 pt-3 text-right" (click)="removeFile()">
                            <img src="./assets/images/bar-x.png" alt="" width="15px">
                        </div>
                    </div>

                    <div class="col-lg-12 col-12 row m-0  pr-0 pl-2 mt-2" style="background-color: rgb(250,250,250);" *ngIf="query_view_type == 'response'">

                        <div class="col-lg-10 col-10 px-0 alternative">

                            <mat-form-field class="example-full-width">
                                <!-- <mat-label>Write your comment here...</mat-label> -->
                                <input matInput placeholder="Write your comment here..." [(ngModel)]="message">
                            </mat-form-field>

                        </div>

                        <div class="col-lg-1 col-1 px-0">
                            <div class="newimg mx-auto d-block">
                                <input class="float-right up" type="file" (change)="uploadFileEvent($event)">
                                <img src="./assets/images/attach.png" alt="" width="100%">
                            </div>
                        </div>

                        <div style="background-color: red;" class="col-lg-1 col-1 px-0">
                            <div class="myimg mx-auto d-block" (click)="sendResponse()">
                                <img src="./assets/images/sendicon.png" alt="" width="100%">
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>